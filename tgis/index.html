<!DOCTYPE html>
<html>
    <head>
        <title>GeoJSON</title>
        <script src="https://maps.api.2gis.ru/2.0/loader.js?pkg=full"></script>
        <link rel="stylesheet" href="https://2gis.github.io/mapsapi/vendors/Leaflet.markerCluster/MarkerCluster.css" />
        <link rel="stylesheet" href="https://2gis.github.io/mapsapi/vendors/Leaflet.markerCluster/MarkerCluster.Default.css" />
        <script src="https://maps.api.2gis.ru/2.0/cluster_realworld.js"></script>
	<script src="data.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="map" style="width:100%; height:800px"></div>
<script>

	function round_4(a) {return Math.round(parseFloat(a)*10000)/10000}
	function rplN(a) {return (a+'').replace(/[,]/g,'.')}
	function z2(a){var b=a; if (parseFloat(rplN(a))<10){b ='0'+ b} return b}
	function deg_dms3(val,a) {var R = deg_dms(val); return (R[0]==0?R[3]:"")+R[0]+"&#176;"+z2(R[1])+"&#8242;"+z2(R[2].toFixed(3))+(a?"&#8242;&#8242;":"&#8243;")}
	function deg_dms(val) {
		var val_s = (val<0?"-":""), val_u = Math.abs(val);
		var g = Math.floor(val_u);
		var m = Math.floor((val_u-g)*60);
		var s = round_4((val_u-g-m/60)*3600);
		if (s==60) {s=0; m++}
		if (m==60) {m=0; g++}
		return [(val_s+g)*1, m, s, val_s]
	}

            DG.then(function() {	// API карт использует сферическую проекцию Меркатора (EPSG:3857)
		var map = DG.map('map', {
			center: [59.2107592707,39.8326271923],
			zoom: 16,
			dragging : true,
			touchZoom: true,
			scrollWheelZoom: true,
			doubleClickZoom: true,
			boxZoom: true,
			geoclicker: false,
			zoomControl: true,
			fullscreenControl: true
		});

DG.geoJson(data, {
	style: function (feature) {
		return {color: feature.properties.color};
	}
}).bindPopup(function (layer) { var object = layer.feature, a = object.geometry.coordinates;
	return "<strong>Имя: </strong>"+ object.properties.Имя +"<br/>"+
		"<strong>Обозначение: </strong>"+ object.properties.Обозначение +"<br/>"+
		"<strong>Название: </strong>"+ object.properties.Название +"<br/>"+
		"<strong>Высота (м): </strong>"+ object.properties["Высота (м)"] +"<br/>"+
		"<strong>Диаметр на высоте 1,3 м (см): </strong>"+ object.properties["Диаметр на высоте 1,3 м (см)"] +"<br/>"+
		"<strong>Диаметр на высоте 0,1 м (см): </strong>"+ object.properties["Диаметр на высоте 0,1 м (см)"] +"<br/>"+
		"<strong>Протяженность зоны без сучьв (м): </strong>"+ object.properties["Протяженность зоны без сучьв (м)"] +"<br/>"+
		"<strong>Диаметр кроны (м): </strong>"+ object.properties["Диаметр кроны (м)"] +"<br/>"+
		"<strong>Балл санитарного состояния: </strong>"+ object.properties["Балл санитарного состояния"] +"<br/>"+
		"<strong>Ступень толщины: </strong>"+ object.properties["Ступень толщины"] +"<br/>"+
		"<strong>Пороки: </strong>"+ object.properties.Пороки +"<br/>"+
		"<strong>Долгота: </strong>"+ a[0].toFixed(8) +" = "+ deg_dms3(a[0],5) +"<br/>"+
		"<strong>Широта: </strong>"+ a[1].toFixed(8) +" = "+ deg_dms3(a[1],5);
}).addTo(map);

DG.control.scale().addTo(map);
DG.control.ruler().addTo(map);
DG.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);

            });
        </script>
    </body>
</html>